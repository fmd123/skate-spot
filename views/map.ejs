<!DOCTYPE html>
<html>
  <head>

    <!-- <meta http-equiv="X-UA-Compatible" content="IE=edge"> -->
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->

    <!-- Bootstrap core CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/stylesheets/style.css" rel="stylesheet">

    <title>Simple Map</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">

  </head>
  <body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
          <a class="navbar-brand" href="/about">SKATE SPOT</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="/">Log Out</a></li>
            <li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Stuff to Do<span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="/views/spotForm">Create/Update Skate Spot</a></li>
          <li><a href="/views/findUserForm">Find Users</a></li>
          <li><a href="#"></a></li>
        </ul>
      </li>
          </ul>
        </div>
        <!--/.nav-collapse -->
      </div>
    </nav>
    <!--:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::  -->

    <div id="map"></div>
<!-- :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
    <!--INPUT FORM HERE ? -->

    <!-- :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
    <script>

    var coordinants = [];

    function initMap(latlng) {
      // var myLatLng = {lat: 21, lng: -141};

      var map = new google.maps.Map(document.getElementById('map'), {
        zoom: 14,
        center: {lat: 40.015861, lng: -105.279284}
      })

    fetch('http://localhost:3000/spots')
    .then((res)=>res.json())
    .then((resjson)=>{
      console.log(resjson)
      for(j=0; j<resjson.length; j++){
        for(var prop in resjson[j]) {
          var name = resjson[j].name;
          var lat = resjson[j].lat;
          var lng = resjson[j].lon;
        }

      const coord = {lat: lat, lng: lng}
      coordinants.push(coord);
      }

        var filterFloat = function(value) {
          if (/^(\-|\+)?([0-9]+(\.[0-9]+)?|Infinity)$/
          .test(value))
          return Number(value);
          return NaN;
        };

        for(i=0; i<coordinants.length; i++) {
          var parseLat = filterFloat(coordinants[i].lat)
          console.log(parseLat)
          var parseLng = filterFloat(coordinants[i].lng)
          new google.maps.Marker({
          position: {lat: parseLat, lng: parseLng},
          map: map,
          title: name
      })
    }
  })
}

//   var makeMarker = (latlng) => {
//     var marker = new google.maps.Marker({
//     position: latlng,
//     map: map,
//     title: 'Hello World!'
//   })
// }

    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCqfcq9t7kpG5XPKI5kHTdifsxwLMqUIDQ&callback=initMap"></script>
<!-- add forms here -->
  </body>
</html>
